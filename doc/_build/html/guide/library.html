

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Library &mdash; dantalian 0.3 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="dantalian 0.3 documentation" href="../index.html" />
    <link rel="up" title="User Guide" href="../guide.html" />
    <link rel="next" title="FUSE" href="fuse.html" />
    <link rel="prev" title="User Guide" href="../guide.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="fuse.html" title="FUSE"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../guide.html" title="User Guide"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">dantalian 0.3 documentation</a> &raquo;</li>
          <li><a href="../guide.html" accesskey="U">User Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="library">
<h1>Library<a class="headerlink" href="#library" title="Permalink to this headline">¶</a></h1>
<p>Libraries are the fundamental level of abstraction in dantalian.  A library is
an abstract tag-based file organization system layered transparently on top of
the underlying file system using hard links.  Libraries are created on
directories, which become the root for its library.  A special <tt class="docutils literal"><span class="pre">.dantalian</span></tt>
directory is created in the root directory.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">I&#8217;ve said it before, but it bears repeating: dantalian uses hard links
heavily.  Make sure you are familiar with how hard links work!  They are
very powerful, but can be messy and/or dangerous if you are not familiar
with them.  Especially take care not to accidently break hard links, e.g. by
copying and removing files.  dantalian leverages the advantages hard links
provide, but won&#8217;t protect you from yourself!</p>
</div>
<p>Tags are directories, and all directories are potential tags (except
<tt class="docutils literal"><span class="pre">.dantalian</span></tt>, a special directory)  Files are &#8220;tagged&#8221; by creating a hard
link in the respective directory.  Files can have any number and combination of
tags.  File names and tag names are restricted only by the underlying file
system (so yes, Unicode and 50 character long names are all okay).  All files
of all types can be tagged, including symlinks.  dantalian provides
functionality such that even directories can be tagged, perfect for hardcore
file organizers.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>While it is possible to manage the library abstraction solely using standard
programs such as <tt class="docutils literal"><span class="pre">ln</span></tt>, dantalian provides useful scripts for performing
operations such as tagging, untagging, and deleting, as commands for the
command-line script <tt class="docutils literal"><span class="pre">dantalian</span></tt>.</p>
<p>See the manpage (linked here: <a class="reference internal" href="../manpage.html#manpage"><em>dantalian - dantalian cli script</em></a>) for the commands for
<tt class="docutils literal"><span class="pre">dantalian</span></tt>.</p>
</div>
<div class="section" id="specific-requirements">
<h2>Specific Requirements<a class="headerlink" href="#specific-requirements" title="Permalink to this headline">¶</a></h2>
<p>There are some requirements for libraries:</p>
<ol class="arabic simple">
<li>The root directory must be located on a POSIX filesystem that supports hard
links (e.g., <tt class="docutils literal"><span class="pre">ext4</span></tt>).</li>
<li>Everything under the root directory must be on one file system.</li>
<li>Do funky things with device mounts at your own risk.  This includes mounting
another device inside a library, mounting a different library FUSE (more on
this in <a class="reference internal" href="fuse.html#fuse"><em>FUSE</em></a>) in a library, and mounting the same library FUSE in
itself.  Don&#8217;t do it.</li>
</ol>
<p>While the above may seem complicated, for most users, it should not be a
problem.  If you run into the above situations, chances are, you&#8217;re an advanced
enough user to figure out why and how to fix them.</p>
</div>
<div class="section" id="name-conflicts">
<span id="id1"></span><h2>Name conflicts<a class="headerlink" href="#name-conflicts" title="Permalink to this headline">¶</a></h2>
<p>Files are hard linked under the tags that it possesses.  The file may have
different names in each of the directories, e.g. to avoid name conflicts.
dantalian provides &#8220;partial&#8221; support for files having different names.  The
library abstraction is completely sound in this case, but certain features may
not work, or may be less useful or harder to work with.  dantalian finds files
by the path to one of its hard links and manages them internally by hard link
references and inodes.</p>
<p>Currently, dantalian is unable to tag a file if a file with the same name
exists in that location (this feature will be implemented later).  However, you
can manually hard link the file with a different name and dantalian will work
perfectly.</p>
</div>
<div class="section" id="tagging-directories">
<h2>Tagging Directories<a class="headerlink" href="#tagging-directories" title="Permalink to this headline">¶</a></h2>
<p>Because directories cannot be hard linked, dantalian must first convert them
before directories can be tagged.  Converting a directory moves it to a special
location under <tt class="docutils literal"><span class="pre">.dantalian</span></tt> and replaces it with an absolute symbolic link to
its new location.  Because converted directories are all kept in one location,
no two converted directories may have the same name.  However, the name of the
directory hitagiFS keeps track of and the name of the symbolic link that users
will be interacting with are separate.  Thus, if there&#8217;s a naming conflict, the
actual directory can be renamed, and the symbolic links follow the naming rules
as above.  This feature imposes an extra requirement on the library root
directory.  Namely, when the root directory path is changed, the symbolic links
of all converted directories must be fixed.  dantalian provides this
functionality, but <tt class="docutils literal"><span class="pre">dantalian</span> <span class="pre">fix</span></tt> must be called each time.</p>
</div>
<div class="section" id="nested-libraries">
<h2>Nested Libraries<a class="headerlink" href="#nested-libraries" title="Permalink to this headline">¶</a></h2>
<p>Only one library can exist in any given directory, but libraries can be nested.
Behavior is well-defined, but I wouldn&#8217;t recommend it unless you have a clear
use case and know what you are doing.  <tt class="docutils literal"><span class="pre">dantalian</span></tt> works with a single
library for its operations.  Usually, it will search up through the directories
and use the first library it finds, so take care of where you run it.  You can
also specify a specific library by using the <tt class="docutils literal"><span class="pre">--root</span></tt> option.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Library</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#specific-requirements">Specific Requirements</a></li>
<li><a class="reference internal" href="#name-conflicts">Name conflicts</a></li>
<li><a class="reference internal" href="#tagging-directories">Tagging Directories</a></li>
<li><a class="reference internal" href="#nested-libraries">Nested Libraries</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../guide.html"
                        title="previous chapter">User Guide</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fuse.html"
                        title="next chapter">FUSE</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/guide/library.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="fuse.html" title="FUSE"
             >next</a> |</li>
        <li class="right" >
          <a href="../guide.html" title="User Guide"
             >previous</a> |</li>
        <li><a href="../index.html">dantalian 0.3 documentation</a> &raquo;</li>
          <li><a href="../guide.html" >User Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, darkfeline.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>