

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Library &mdash; dantalian 0.3 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="dantalian 0.3 documentation" href="../index.html" />
    <link rel="up" title="Specification" href="../specs.html" />
    <link rel="next" title="FUSE" href="fuse.html" />
    <link rel="prev" title="Specification" href="../specs.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="fuse.html" title="FUSE"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../specs.html" title="Specification"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">dantalian 0.3 documentation</a> &raquo;</li>
          <li><a href="../specs.html" accesskey="U">Specification</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="library">
<h1>Library<a class="headerlink" href="#library" title="Permalink to this headline">Â¶</a></h1>
<p>Libraries are the central data model in dantalian.  They project an alternate
tag-based file organization system transparently on top of the underlying file
system using hard links.</p>
<p>A library is created on a directory.  This directory becomes the root
directory for the library.  A special <tt class="docutils literal"><span class="pre">.dantalian</span></tt> directory is created in
the root directory.  The root directory must be located on a POSIX filesystem
that supports hard links (e.g., <tt class="docutils literal"><span class="pre">ext4</span></tt>).  Everything under the root directory
must be on one file system.  Do funky things with device mounts at your own
risk.</p>
<p>Libraries use a conceptual abstraction of files and tags.  All directories
(except <tt class="docutils literal"><span class="pre">.dantalian</span></tt>) under the root directory is a tag and is referred to
with its path relative to the root directory.  All files (not directories, but
including symbolic links) are files that can be tagged under the library
abstraction.</p>
<p>Files are hard linked under the tags that it possesses.  The file may have
different names in each of the directories, e.g. to avoid name conflicts.
dantalian provides &#8220;partial&#8221; support for files having different names.  The
library abstraction is completely sound in this case, but certain features may
not work, or may be less useful or harder to work with.  dantalian finds files
by the path to one of its hard links and manages them internally by hard link
references and inodes.  If you are using different names for a single file,
carefully read the documentation to see how hitagiFS handles paths in different
situations.</p>
<p>Because directories cannot be hard linked, dantalian must first convert them
before directories can be tagged.  Converting a directory moves it to a special
location under <tt class="docutils literal"><span class="pre">.dantalian</span></tt> and replaces it with an absolute symbolic link to
its new location.  Because converted directories are all kept in one location,
no two converted directories may have the same name.  However, the name of the
directory hitagiFS keeps track of and the name of the symbolic link that users
will be interacting with are separate.  Thus, if there&#8217;s a naming conflict, the
actual directory can be renamed, and the symbolic links follow the naming rules
as above.  This feature imposes an extra requirement on the library root
directory.  Namely, when the root directory path is changed, the symbolic links
of all converted directories must be fixed.  dantalian provides this
functionality, but <tt class="docutils literal"><span class="pre">dantalian</span> <span class="pre">fix</span></tt> must be called each time.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../specs.html"
                        title="previous chapter">Specification</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fuse.html"
                        title="next chapter">FUSE</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/specs/library.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="fuse.html" title="FUSE"
             >next</a> |</li>
        <li class="right" >
          <a href="../specs.html" title="Specification"
             >previous</a> |</li>
        <li><a href="../index.html">dantalian 0.3 documentation</a> &raquo;</li>
          <li><a href="../specs.html" >Specification</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, darkfeline.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>